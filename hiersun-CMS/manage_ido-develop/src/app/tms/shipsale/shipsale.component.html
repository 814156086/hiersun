<div class="row">
  <div class="col-md-12 col-xs-12">
    <div class="portlet box blue-hoki">
      <div class="portlet-title">
        <div class="caption">
          拣货单管理
        </div>
      </div>
      <div class="portlet-body">
        <form class="form-horizontal">
          <div class="col-md-4 col-sm-6 col-xs-12">
            <div class="form-group">
              <label class="control-label col-md-4">销售时间：</label>
              <div class="col-md-7">
                <input type="text" id="saleTime" class="saleDate form-control" readonly>
              </div>
            </div>
          </div>
          <div class="col-md-4 col-sm-6 col-xs-12">
            <div class="form-group">
              <label class="control-label col-md-4">销售单号：</label>
              <div class="col-md-7">
                <input id="orderNo" name="txtOrderNo" type="text" class="form-control">
              </div>
            </div>
          </div>
          <div class="col-md-4 col-sm-6 col-xs-12">
            <div class="form-group">
              <label class="control-label col-md-4">发货单编号：</label>
              <div class="col-md-7">
                <input id="delivetyNo" name="txtDelivetyNoNo" type="text" class="form-control">
              </div>
            </div>
          </div>
          <div class="col-md-4 col-sm-6 col-xs-12 statusShow">
            <div class="form-group">
              <label class="control-label col-md-4">发货单状态：</label>
              <div class="col-md-7">
                <select id="delivetyStatus" class="form-control select2me" data-placeholder=" ">
                  <option value="">所有</option>
                  <option *ngFor="let sasitem of orderstatus;let saskey=index;" value="{{sasitem.code}}">{{sasitem.name}}</option>
                </select>
              </div>
            </div>
          </div>
          <div class="col-md-4 col-sm-6 col-xs-12">
            <div class="form-group">
              <label class="control-label col-md-4">门店名称：</label>
              <div class="col-md-7">
                <select id="saleStore" class="form-control select2me" data-placeholder=" ">
                  <option value="">所有</option>
                  <option *ngFor="let storeitem of storeList;let storekey=index;" value="{{storeitem.organizationCode}}">{{storeitem.organizationName}}</option>
                </select>
              </div>
            </div>
          </div>
          <div class="col-md-4 col-sm-6 col-xs-12">
            <div class="form-group">
              <label class="control-label col-md-4">仓库名称：</label>
              <div class="col-md-7">
                <select id="storageNum" class="form-control select2me" data-placeholder=" ">
                  <option value="">所有</option>
                  <option *ngFor="let storageitem of storageList;let sourcekey=index;" value="{{storageitem.storageNum}}">{{storageitem.storageName}}</option>
                </select>
              </div>
            </div>
          </div>
          <div class="col-md-4 col-sm-6 col-xs-12">
            <div class="form-group">
              <label class="control-label col-md-4">物流公司：</label>
              <div class="col-md-7">
                <select id="expCompany" class="form-control select2me" data-placeholder=" ">
                  <option value="">所有</option>
                  <option *ngFor="let expitem of expComList;let expkey=index;" value="{{expitem.logisticsCompanyCode}}">{{expitem.logisticsCompanyName}}</option>
                </select>
              </div>
            </div>
          </div>
          <div class="col-md-4 col-sm-6 col-xs-12">
            <div class="form-group">
              <label class="control-label col-md-4">快递单号：</label>
              <div class="col-md-7">
                <input id="expressNo" name="txtExpressNo" type="text" class="form-control">
              </div>
            </div>
          </div>
          <div class="col-md-4 col-sm-6 col-xs-12">
            <div class="form-group">
              <label class="control-label col-md-4">收货人电话：</label>
              <div class="col-md-7">
                <input id="receptPhone" name="txtReceptPhone" type="text" class="form-control">
              </div>
            </div>
          </div>
          <div class="row margin-search height-30">
            <div class="col-md-12 col-sm-12 col-xs-12">
              <div class="form-group col-md-12" style="text-align:center;">
                <button id="btnSearch" type="button" class="btn default" (click)="initShipInfo()">查询
                  <i class="fa fa-search"></i>
                </button>
                <button id="btnReset" type="button" class="btn default" (click)="queryReset()">
                  重置
                  <i class="fa fa-times"></i>
                </button>
                <button id="btnReset" type="button" class="btn default" (click)="prindorder()">
                  打印
                  <i class="fa fa-print"></i>
                </button>
                <!--<button id="btnReset" type="button" class="btn default" (click)="groupWave()">
                  组波
                  <i class="fa fa-chain-broken"></i>
                </button>
                <button id="btnReset" type="button" class="btn default" (click)="mergeorder()">
                  合单
                  <i class="fa fa-align-justify"></i>
                </button>-->
                <button id="btnReset" type="button" class="btn default" (click)="demolition()">
                  拆单
                  <i class="fa fa-align-center"></i>
                </button>
              </div>
            </div>
          </div>
        </form>
        <div id="sample_6_wrapper" class="dataTables_wrapper no-footer">
          <div class="table-scrollable">
            <table class="table table-striped table-bordered table-hover allList">
              <thead>
              <tr class="text-center">
                <th>
                  <input type="checkbox" id="parentcheckBox" (click)="allchoose()" />
                </th>
                <th> 发货单编号</th>
                <th> 销售单编号</th>
                <th> 订单来源</th>
                <th> 波次单号</th>
                <th> 发货单状态</th>
                <th> 发货单打印</th>
                <th> 电子面单</th>
                <th> 拦截</th>
                <th> 称重</th>
                <th> 复检</th>
                <th> 销售时间</th>
                <th> 仓库名称</th>
                <th> 门店名称</th>
                <th> 配送方式</th>
                <th> 物流公司</th>
                <th> 物流单号</th>
                <th> 收件人姓名</th>
                <th> 是否货到付款</th>
                <th> 是否合单</th>
                <th> 是否开发票</th>
                <th> 备注</th>
              </tr>
              </thead>
              <tbody>
              <tr *ngIf="recordTotal==0">
                <td class="text-center" colspan="21">没有相关记录~</td>
              </tr>
              <tr role="row" class="odd" *ngFor="let shipItem of shipSaleList;let shipkey=index;">
                <!-- 操作 -->
                <td style="text-align:center;">
                  <!-- <span style="cursor: pointer;" class="glyphicon glyphicon-plus" (click)="detailPlus($event.target,shipItem.delivetyNo)"></span> -->
                  <input type="checkbox" name="orderIds" value="{{shipItem.delivetyNo}}" (click)="clickme()" />
                </td>
                <!-- 发货单编号 -->
                <td>
                  <a (click)="getDelivesMes(shipItem.delivetyNo)"> {{shipItem.delivetyNo}}</a>
                </td>
                <!-- 销售单编号 -->
                <td>
                  {{shipItem.saleNo}}
                </td>
                <!--订单来源-->
                <td>
                  <span *ngFor="let sourceitem of sourceList;let stokey=index;">{{sourceitem.channelCode==shipItem.orderSource?sourceitem.channelName:''}}</span>
                </td>
                <!--波次单号-->
                <td>{{shipItem.waveOrderNo?shipItem.waveOrderNo:"--"}}</td>
                <!-- 发货单状态 -->
                <td>{{shipItem.delivetyStatusDesc?shipItem.delivetyStatusDesc:"--"}}</td>
                <!--发货单打印状态-->
                <td>
                    <span *ngIf="shipItem.printDeliveryStatus==1">
                      <i class="fa fa-check text-success"></i>
                    </span>
                  <span *ngIf="shipItem.printDeliveryStatus==0"></span>
                </td>
                <!--电子面单状态-->
                <td>
                    <span *ngIf="shipItem.thermalPrintStatus==1">
                      <i class="fa fa-check text-success"></i>
                    </span>
                  <span *ngIf="shipItem.thermalPrintStatus==0"></span>
                </td>
                <!--拦截状态-->
                <td>
                    <span *ngIf="shipItem.interceptStatus==1">
                      <i class="fa fa-check text-success"></i>
                    </span>
                  <span *ngIf="shipItem.interceptStatus==0"></span>
                </td>
                <!--是否称重-->
                <td>
                    <span *ngIf="shipItem.isWeight==1">
                      <i class="fa fa-check text-success"></i>
                    </span>
                  <span *ngIf="shipItem.isWeight==0"></span>
                </td>
                <!--是否复检-->
                <td>
                    <span *ngIf="shipItem.isScan==1">
                      <i class="fa fa-check text-success"></i>
                    </span>
                  <span *ngIf="shipItem.isScan==0"></span>
                </td>
                <!-- 销售时间 -->
                <td>{{shipItem.saleTime| date:'yyyy-MM-dd HH:mm:ss'}}</td>
                <!-- 仓库名称 -->
                <td>{{shipItem.storageName?shipItem.storageName:"--"}}</td>
                <!-- 门店名称 -->
                <td>
                  <span *ngFor="let storeitem of storeList;let storekey=index;">{{storeitem.organizationCode==shipItem.shopNo?storeitem.organizationName:''}}</span>
                </td>
                <!-- 配送方式 -->
                <td>{{shipItem.deliveryModeName?shipItem.deliveryModeName:"--"}}</td>
                <!-- 物流公司 -->
                <td>
                  <span *ngFor="let expitem of expComList;let expkey=index;">{{expitem.logisticsCompanyCode==shipItem.logisticsNo?storeitem.logisticsCompanyName:''}}</span>
                </td>
                <!-- 物流单号 -->
                <td>{{shipItem.expressNo?shipItem.expressNo:"--"}}</td>
                <td>{{shipItem.receptName?shipItem.receptName:"--"}}</td>
                <!-- 是否货到付款 -->
                <td *ngIf="shipItem.isCod!=1">
                  <span class="label label-sm label-danger">否</span>
                </td>
                <td *ngIf="shipItem.isCod==1">
                  <span class="label label-sm label-success">是</span>
                </td>
                <!-- 是否合并 -->
                <td *ngIf="shipItem.isMerge!=1">
                  <span class="label label-sm label-danger">否</span>
                </td>
                <td *ngIf="shipItem.isMerge==1">
                  <span class="label label-sm label-success">是</span>
                </td>
                <!-- 是否开发票 -->
                <td *ngIf="shipItem.needInvoice!=1">
                  <span class="label label-sm label-danger">否</span>
                </td>
                <td *ngIf="shipItem.needInvoice==1">
                  <span class="label label-sm label-success">是</span>
                </td>
                <!-- <td>波次单号</td>
                <td>波次时间</td> -->
                <!-- 备注 -->
                <td> {{shipItem.remark?shipItem.remark:"--"}}</td>
              </tr>
              </tbody>
            </table>
          </div>
          <!--pagestart-->
          <div class="clearfix">
            <div id="pagination1" class="page"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- 操作加号的modal -->
<!-- BEGIN MODAL-->
<div class="modal fade" id="modal_ship" data-backdrop="static" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog ship-container">
    <div class="modal-content">
      <!-- <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
            <h4 class="modal-title">销售单详情</h4>
          </div> -->
      <div class="modal-body form-horizontal">
        <!-- 1 -->
        <div class="form-body">
          <div class="table-scrollable table-ofy">
            <table class="table table-striped table-bordered table-hover selItemTable">
              <thead>
              <tr class="text-center">
                <th> 操作</th>
                <th> 发货单详情号</th>
                <th> 发货单号</th>
                <th> 发货单状态</th>
                <th> 数量</th>
                <th> 销售单商品行</th>
                <th> 有效状态</th>
              </tr>
              </thead>
              <tbody>
              <tr role="row" class="odd" *ngFor="let deitem of delivetyItemList;let dikey=index;">
                <td id="{{deitem.sid}}">
                  <div class="md-checkbox">
                    <input type="checkbox" name="checkbox_ship" value="{{deitem.delivetyItemNo}}" title="{{deitem.sid}}" id="checkbox{{deitem.sid}}"
                           class="md-check">
                    <label for="checkbox{{deitem.sid}}">
                      <span></span>
                      <span class="check"></span>
                      <span class="box"></span>
                    </label>
                  </div>
                </td>
                <!-- 发货单详情号 -->
                <td> {{deitem.delivetyItemNo?deitem.delivetyItemNo:"--"}}</td>
                <!-- 发货单号 -->
                <td class="delivetyNo"> {{deitem.delivetyNo?deitem.delivetyNo:"--"}} </td>
                <!-- 发货单状态 -->
                <td> {{deitem.delivetyStatusDesc?deitem.delivetyStatusDesc:"--"}} </td>
                <!-- 数量 -->
                <td class="qty"> {{deitem.qty?deitem.qty:"--"}} </td>
                <!-- 销售单商品行 -->
                <td class="salesItem"> {{deitem.salesItemNo?deitem.salesItemNo:"--"}} </td>
                <!-- 有效状态 -->
                <td *ngIf="deitem.states!=1">
                  <span class="label label-sm label-danger">否</span>
                </td>
                <td *ngIf="deitem.states==1">
                  <span class="label label-sm label-success">是</span>
                </td>
              </tr>
              </tbody>
            </table>
          </div>
        </div>
        <!-- 1 -->
        <div style="margin: 0 auto;width: 30%;">
          <button type="button" class="btn btn-block green-meadow" (click)="submitShip()">拆分</button>
        </div>
      </div>
      <div class="modal-footer" style="text-align: right;">
        <button type="button" class="btn default" data-dismiss="modal" (click)="closeMoadl()">关闭</button>
      </div>
    </div>
  </div>
</div>
<!-- END MODAL-->
<!-- 发货单详情弹窗 -->
<app-shipdetail #shipdetail></app-shipdetail>
<!-- 打印弹窗 -->
<app-print #print [initShipInfo]="initShipInfo"></app-print>
<!--确认消息提示框-->
<div id="warnMsgWin" *ngIf="isShowWarnWin" class="div_dialog animated {{btn_type_css}} fadeIn">
  <div class="title_dialog" style="font-size: 19px;line-height: 16px;">系统提示:</div>
  <div class="discription_dialog" style="font-size: 15px;">{{warnMsg}}</div>
  <div class="dialog_divOperation ">
    <span class="btn_span yellow_win_btn_hover_{{btn_type_css}} one_btn_span defalut" data-name="确定" style="padding: 4px 17px; font-size: 14px; height: auto;"
          (click)="closeWin()">确定</span>
  </div>
</div>
<div *ngIf="isShowWarnWin" class="cpt-dw-dialog-mask animated fadeIn" style="background: rgba(0, 0, 0, 0.4);z-index: 10000010;transition: all 0s ease 0s;animation-duration: 0s;"></div>
<!-- 加载动图 -->
<div class="spinner" *ngIf="!isload">
  <div class="bounce1"></div>
  <div class="bounce2"></div>
  <div class="bounce3"></div>
</div>
